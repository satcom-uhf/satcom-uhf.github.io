{"id":588,"date":"2018-08-01T02:27:53","date_gmt":"2018-07-31T23:27:53","guid":{"rendered":"http:\/\/olegkutkov.me\/?p=588"},"modified":"2021-02-08T13:14:59","modified_gmt":"2021-02-08T11:14:59","slug":"powerful-dc-motor-driver-using-ir2110","status":"publish","type":"post","link":"https:\/\/olegkutkov.me\/2018\/08\/01\/powerful-dc-motor-driver-using-ir2110\/","title":{"rendered":"Powerful DC motor driver using IR2110"},"content":{"rendered":"<p><img loading=\"lazy\" decoding=\"async\" class=\"alignleft size-full wp-image-589\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/small_title.png\" alt=\"\" width=\"200\" height=\"149\" \/>To control the DC motor&#8217;s speed and rotation direction, we need some motor driver. One of the most popular schematics is <a href=\"https:\/\/en.wikipedia.org\/wiki\/H_bridge\">H-Bridge<\/a>. For the low current and voltages, we can use some integral solutions like <a href=\"http:\/\/www.ti.com\/lit\/ds\/symlink\/l293.pdf\">L293D<\/a> and so on. But if we need more power and reliability, we have to build some custom H-bridge using Mosfet transistors. This type of transistor requires careful and proper driving itself. One of the most popular integral solutions for driving MOSFETs is <a href=\"https:\/\/www.infineon.com\/dgdl\/ir2110.pdf?fileId=5546d462533600a4015355c80333167e\">IR2110<\/a> from Infineon.<br \/>\nThis article will discuss how to use this IC to build a powerful DC motor driver.<\/p>\n<p><!--more--><\/p>\n<p>IR2110 is a high voltage (up to 500V) chip that is suitable for driving various MOSFET and IGBT types. This device contains both low-side and high-side half-bridge drivers.<\/p>\n<p>You can find pins description and other parameters in <a href=\"https:\/\/www.infineon.com\/dgdl\/ir2110.pdf?fileId=5546d462533600a4015355c80333167e\">the datasheet<\/a>.<\/p>\n<p>Here is a typical schematic:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_typical_schematic_bw.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1812\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_typical_schematic_bw.png\" alt=\"\" width=\"894\" height=\"653\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_typical_schematic_bw.png 894w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_typical_schematic_bw-400x292.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_typical_schematic_bw-768x561.png 768w\" sizes=\"(max-width: 894px) 100vw, 894px\" \/><\/a><\/p>\n<p>This is a half-bridge driver, which means that <strong>LOAD<\/strong> pin can be connected to <strong>LOAD SUPPLY<\/strong> or <strong>AGND<\/strong>, depending on the input pins <strong>ENABLE HI<\/strong> and <strong>ENABLE LO<\/strong>. These signals can be a static voltage of the logic levels (3.3 to 5 volts) or some pulse signals like PWM.<\/p>\n<p>Controlling the Q2 MOSFET is very simple and doesn&#8217;t require extra schematics.<br \/>\nWith Q1, all things are slightly more complicated since the SOURCE pin of this transistor is floating without a direct connection to the power supply negative line.<br \/>\nTo enable this transistor, we need to create a &#8220;virtual&#8221; zero point, and additional power is required.<br \/>\nThis problem can be solved using bootstrap circuitry.<\/p>\n<p>You can see diode D5 and two capacitors C1 and C2. When the low-side is active (Q2 is opened), both capacitors are charging through the diode from the IR2110 power supply (typically 12V). Then when the high-side becomes active, these capacitors are using to charge the Q1 gate and open this transistor.<br \/>\nThe value of C1 depends on the switching frequency and duty cycle. Typically this value is in the range of 4.7 &#8211; 22 microfarads.<br \/>\nOf course, there is a formula that can be used to calculate a proper value. Please read<a href=\"https:\/\/www.infineon.com\/dgdl\/an-978.pdf?fileId=5546d462533600a40153559f7cf21200\"> this appnote<\/a> if you want to know more about floating and bootstraps circuits.<br \/>\nBut also, you can select the proper capacitor value experimentally. Proper value is guaranteed that the capacitor can discharge quickly enough to close the transistor and charge quickly enough to reach the required voltage value. Better to use tantalum capacitors, but the electrolyte is also Ok, but an additional ceramic bypass is required.<\/p>\n<p>Diodes D1 and D2 provide a quick discharge circuit so both transistors can be closed immediately.<\/p>\n<p>Diodes D7 and D9 protect MOSFETs from the large inductive loads and very necessary when driving motors.<\/p>\n<p>Two resistors R5 and R6, are used to limit the gates&#8217; charging current to protect transistors.<br \/>\nR2 and R1 is an additional protection circuit that prevents the Gate pin from floating and protects transistors from the enabling.<\/p>\n<p>When both transistors enabling at the same time &#8211; it&#8217;s a big problem called <strong>shoot through<\/strong>. This is equivalent to a short circuit that can destroy both MOSFETs and ruin your day.<\/p>\n<p>To avoid shoot-through of the MOSFETs, we need to ensure that ENABLE HI and ENABLE LO input pins are not activating simultaneously.<\/p>\n<p>One of the ways is to use a simple protection circuit that is placed near the IR2110 input pins:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_protection_schematic_bw.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1813\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_protection_schematic_bw.png\" alt=\"\" width=\"544\" height=\"678\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_protection_schematic_bw.png 544w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_protection_schematic_bw-241x300.png 241w\" sizes=\"(max-width: 544px) 100vw, 544px\" \/><\/a>74HC00N is a quad 2-input NAND gate that acts like a cross-locking circuit.<br \/>\nA by-product of this schematic is inverting the signal, so we need to invert the actual input signal before.<br \/>\nWhen IN HI is low (for example) &#8211; output pins 6 and 8 are in the high state, and pin 6 drives IR2110 ENABLE HI input.<br \/>\nSimultaneously, pin 8 activates the T2 transistor, which pulls down ENABLE LOW line, which protects this line from unauthorized activation.<br \/>\nAnother part of the schematics with T1 works in the same way.<\/p>\n<h3>Full bridge driver.<\/h3>\n<p>To build a full H-bridge, we need two identical halves of the half-bridge.<br \/>\nIn this case, ENABLE HI of the first IR2110 should be connected to the ENABLE LOW of the second IR2110 and vice versa.<\/p>\n<p>The load is connecting between LOAD terminals of both halves.<\/p>\n<p>Here is a full schematic of the driver, which I use for big 110 volt motors.<br \/>\nThis device contains all protection circuits described above and provides galvanic isolation on inputs to safely connect the microcontroller as a PWM signal source.<br \/>\nThis board requires two stabilized power supplies, 5 and 12 volts. The actual bridge is powering from a separate 110-volt source.<br \/>\nAlso, you can find a current measurement circuit based on the hall-effect sensor <a href=\"https:\/\/www.sparkfun.com\/datasheets\/BreakoutBoards\/0712.pdf\">ACS712<\/a>. This part is not mandatory and is used in my current project.+<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_dc_driver_schematic.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter  wp-image-1810\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_dc_driver_schematic-1024x395.png\" alt=\"\" width=\"1024\" height=\"395\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_dc_driver_schematic-1024x395.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_dc_driver_schematic-400x154.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_dc_driver_schematic-768x296.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_dc_driver_schematic-1536x593.png 1536w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/ir2110_dc_driver_schematic-2048x790.png 2048w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/a><\/p>\n<p>Diodes D11 and D12 are highly recommended for reliability. This diode provides a path for possible reverse currents (in long lines between drivers board and controller) in bad EMI conditions. Even a small reverse current can damage optocouplers led.<\/p>\n<p>The values of the R9 and R10 should be selected for your variant of 74HC00. It may be or 570 ohms or 3.8 kiloohms. To debug this part, you need a scope that can help you control the form of the signal after 74HC00. But if you don&#8217;t have one &#8211; replace resistors till the schematic became working.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/motor_driver_EAGLE_PROJECT.zip\">IR2110 Eagle project files<\/a><\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/motor_driver_GERBER.zip\">IR2110 Gerber files for the PCB factory<\/a><\/p>\n<p>PCB images:<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_board.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-594\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_board-1024x659.png\" alt=\"\" width=\"840\" height=\"541\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_board-1024x659.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_board-300x193.png 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_board-768x494.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_board.png 1052w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a>And both layers for DIY:<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_bottom.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-595\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_bottom-1024x659.png\" alt=\"\" width=\"840\" height=\"541\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_bottom-1024x659.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_bottom-300x193.png 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_bottom-768x494.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_bottom.png 1102w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a> <a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_top.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-596\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_top-1024x659.png\" alt=\"\" width=\"840\" height=\"541\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_top-1024x659.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_top-300x193.png 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_top-768x494.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/dc_driver_pcb_top.png 1102w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>Completed boards with medium power transistors.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/wDgcFf4LCZs.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-599\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/wDgcFf4LCZs.jpg\" alt=\"\" width=\"800\" height=\"498\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/wDgcFf4LCZs.jpg 960w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/wDgcFf4LCZs-300x187.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/wDgcFf4LCZs-768x478.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/sHKMAWiwiRo.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-597\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/sHKMAWiwiRo.jpg\" alt=\"\" width=\"720\" height=\"960\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/sHKMAWiwiRo.jpg 720w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/sHKMAWiwiRo-225x300.jpg 225w\" sizes=\"(max-width: 720px) 100vw, 720px\" \/><\/a><\/p>\n<p>And another variant with big transistors on the radiator. This device can drive more than 2 kilowatts load.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/5MHVwuMTA10.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-600\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/5MHVwuMTA10.jpg\" alt=\"\" width=\"800\" height=\"600\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/5MHVwuMTA10.jpg 960w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/5MHVwuMTA10-300x225.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/5MHVwuMTA10-768x576.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/79-McXB8u5w.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-601\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/79-McXB8u5w.jpg\" alt=\"\" width=\"800\" height=\"639\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/79-McXB8u5w.jpg 914w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/79-McXB8u5w-300x240.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/08\/79-McXB8u5w-768x613.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>As you can see, powerful MOSFETs are placed on radiators, away from the driver boards.<br \/>\nThis is permissible, but wire between boards and transistors should be as short as possible. Also, it&#8217;s a good idea to twist the SOURCE and GATE line as a differential pair. This helps us to minimize inductance.<br \/>\nProtection resistors on these lines should be placed as close as possible to the transistors.<br \/>\nYou can see everything in the photos above.<\/p>\n<p>Laboratory tests of this driver.<br \/>\nAs a PWM signal source, I&#8217;m using a Siglent signal generator in Pulse mode. The frequency is 15 kHz, the duty cycle is changing, which is causes changes in motor rotation speed.<\/p>\n<p><iframe loading=\"lazy\" title=\"Sintez power modules: 15 kHz test\" width=\"850\" height=\"478\" src=\"https:\/\/www.youtube.com\/embed\/R5_OHjZ1qTY?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen><\/iframe><\/p>\n<p>Thanks for reading!<br \/>\nI hope this material will be helpful.<\/p>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n","protected":false},"excerpt":{"rendered":"<p>To control the DC motor&#8217;s speed and rotation direction, we need some motor driver. One of the most popular schematics is H-Bridge. For the low current and voltages, we can use some integral solutions like L293D and so on. But if we need more power and reliability, we have to build some custom H-bridge using [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[11,30],"tags":[63,39,62],"_links":{"self":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/588"}],"collection":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/comments?post=588"}],"version-history":[{"count":15,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/588\/revisions"}],"predecessor-version":[{"id":1814,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/588\/revisions\/1814"}],"wp:attachment":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/media?parent=588"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/categories?post=588"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/tags?post=588"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}