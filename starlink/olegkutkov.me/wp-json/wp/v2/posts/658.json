{"id":658,"date":"2018-09-18T17:11:05","date_gmt":"2018-09-18T14:11:05","guid":{"rendered":"http:\/\/olegkutkov.me\/?p=658"},"modified":"2021-01-30T20:18:22","modified_gmt":"2021-01-30T18:18:22","slug":"isolated-usb-to-rs485-adapter-version-2","status":"publish","type":"post","link":"https:\/\/olegkutkov.me\/2018\/09\/18\/isolated-usb-to-rs485-adapter-version-2\/","title":{"rendered":"Isolated USB to RS485 adapter version 2"},"content":{"rendered":"<p><img loading=\"lazy\" decoding=\"async\" class=\"alignleft size-thumbnail wp-image-660\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319_th-150x150.jpg\" alt=\"\" width=\"150\" height=\"150\" \/>This is a second version of the USB to RS485 adapter. Please read <a href=\"https:\/\/olegkutkov.me\/2018\/05\/10\/isolated-usb-to-rs485-adapter\/\">this article<\/a> about the first version.<\/p>\n<p>The new device is built with ISO3082 and requires fewer components. Also, this device can provide more reliability in some situations.<\/p>\n<p><!--more--><\/p>\n<p>This adapter&#8217;s USB side is pretty equal to the old one except for the USB protection circuit. You can see additional IC STF202 between the USB socket and FT232.<\/p>\n<p>STF202 is a USB Filter with ESD Protection. Bi-directional EMI Filtering Prevents Noise from Entering\/Leaving the System.<\/p>\n<p>Here is the internal circuit of the device TSOP\u22126 package.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/stf202.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-medium wp-image-663\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/stf202-300x258.png\" alt=\"\" width=\"300\" height=\"258\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/stf202-300x258.png 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/stf202.png 738w\" sizes=\"(max-width: 300px) 100vw, 300px\" \/><\/a><\/p>\n<p>This device can work in USB low-speed and full-speed modes. Please refer to <a href=\"https:\/\/www.onsemi.com\/pub\/Collateral\/STF202-22T1-D.PDF\">the datasheet<\/a> to get more information about STF202.<\/p>\n<p>RS485 part with galvanic isolation is built with a single <a href=\"http:\/\/www.ti.com\/lit\/ds\/symlink\/iso3086.pdf\">ISO3082<\/a> from TI.\u00a0 This is a very reliable industrial-grade high-speed transceiver.<\/p>\n<p>ISO3082 still requires an isolated power supply. This circuit is based on the well-known TMA0505 DC converter.<\/p>\n<p>Here is a full schematic of the new adapter:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_v2_schematic.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-1703\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_v2_schematic-1024x395.png\" alt=\"\" width=\"850\" height=\"328\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_v2_schematic-1024x395.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_v2_schematic-400x154.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_v2_schematic-768x296.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_v2_schematic-1536x592.png 1536w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_v2_schematic-2048x789.png 2048w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/p>\n<p>And the drawing of the board.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/board_overview.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-666\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/board_overview.png\" alt=\"\" width=\"501\" height=\"261\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/board_overview.png 501w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/board_overview-300x156.png 300w\" sizes=\"(max-width: 501px) 100vw, 501px\" \/><\/a><\/p>\n<p>Resistors R1 and R2 provide additional protection and match with long lines.\u00a0 R3 is using to connect isolated signal ground to the actual ground (earth). This is very important for line protection.<\/p>\n<p>RS485 line is required only two twisted wires to transmit data, but it is&#8217; a very good idea to connect all isolated signal grounds of all devices on the line. This may help to reduce any voltage bias between distant devices.<\/p>\n<p>Typical two-wires RS485 network.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_line.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-668\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_line.jpg\" alt=\"\" width=\"750\" height=\"211\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_line.jpg 750w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_line-300x84.jpg 300w\" sizes=\"(max-width: 750px) 100vw, 750px\" \/><\/a><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_line.jpg\">image credit:\u00a0<\/a><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/rs485_line.jpg\">ipc2u.com<\/a><\/p>\n<p>Don&#8217;t forget to terminate both sides of the line with 120-ohm resistors!<br \/>\nThe current USB to RS485 adapter is already equipped with such resistor (R8 on the schematic).<\/p>\n<p>Completed board<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2317.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-669\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2317-300x225.jpg\" alt=\"\" width=\"500\" height=\"375\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2317-300x225.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2317-768x576.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2317-1024x768.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2317-1200x900.jpg 1200w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2317.jpg 2000w\" sizes=\"(max-width: 500px) 100vw, 500px\" \/><\/a> <a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-670\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319-1024x768.jpg\" alt=\"\" width=\"500\" height=\"375\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319-1024x768.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319-300x225.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319-768x576.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319-1200x900.jpg 1200w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/09\/IMG_2319.jpg 1500w\" sizes=\"(max-width: 500px) 100vw, 500px\" \/><\/a>Thanks for reading!<\/p>\n<p>&nbsp;<\/p>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n","protected":false},"excerpt":{"rendered":"<p>This is a second version of the USB to RS485 adapter. Please read this article about the first version. The new device is built with ISO3082 and requires fewer components. Also, this device can provide more reliability in some situations.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[30],"tags":[50],"_links":{"self":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/658"}],"collection":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/comments?post=658"}],"version-history":[{"count":14,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/658\/revisions"}],"predecessor-version":[{"id":1705,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/658\/revisions\/1705"}],"wp:attachment":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/media?parent=658"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/categories?post=658"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/tags?post=658"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}