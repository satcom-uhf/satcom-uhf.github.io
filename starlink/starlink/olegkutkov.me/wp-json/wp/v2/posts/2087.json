{"id":2087,"date":"2021-08-19T03:29:43","date_gmt":"2021-08-19T00:29:43","guid":{"rendered":"https:\/\/olegkutkov.me\/?p=2087"},"modified":"2021-08-19T16:17:04","modified_gmt":"2021-08-19T13:17:04","slug":"housing-for-the-1pps-square-clock-8-channel-distribution-amplifier","status":"publish","type":"post","link":"https:\/\/olegkutkov.me\/2021\/08\/19\/housing-for-the-1pps-square-clock-8-channel-distribution-amplifier\/","title":{"rendered":"Housing for the 1PPS\/Square clock 8 channel distribution amplifier"},"content":{"rendered":"<p><img loading=\"lazy\" decoding=\"async\" class=\"alignleft size-full wp-image-2088\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/top_view_th.jpg\" alt=\"\" width=\"150\" height=\"147\" \/>While experimenting with <a href=\"https:\/\/olegkutkov.me\/2021\/04\/10\/1pps-square-clock-8-channel-distribution-amplifier\/\">my clock distribution amplifier<\/a>, I found that this board creates a lot of interference to my HackRF receivers.<br \/>\nPlus, it&#8217;s not very convenient to work with a bare board.<\/p>\n<p>I decided to build metal housing for this board. This is just a little note about its construction and some nuances.<\/p>\n<p><!--more--><\/p>\n<p>&nbsp;<\/p>\n<p>Sure, it&#8217;s impossible to find a 100% matching case for this board. I selected aluminum enclosure Gainta <a href=\"http:\/\/www.gainta.com\/en\/g0247.html\">G0247<\/a>.<br \/>\nThis case is slightly bigger than the board, and this allows to fit all required connectors and indicators. Also, I decided to build an external 5V regulator using the case as a heatsink.<\/p>\n<p>The board is bolted to one side of the case. All clock outputs are placed on the case back side. Input signals are connected using three short coaxial patch cords. I think it&#8217;s most logical.<\/p>\n<p>For the 1PPS, I used <a href=\"http:\/\/www.klsele.com\/products\/407\/606\/225.html\">KLS15-RCS01-PC10<\/a> 10 pin circular connector. 8 pins are for 1PPS, and two pins are for ground. I think this is the best choice. An external power supply is connected via <a href=\"http:\/\/www.klsele.com\/products\/407\/Circular-Connectors-Series\/231.html\">KLS15-225-M16<\/a> 6 pin connector just because I had one.<\/p>\n<p>The initial arrangement inside the case:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/top_view.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-2094\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/top_view-1024x717.jpg\" alt=\"\" width=\"850\" height=\"595\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/top_view-1024x717.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/top_view-400x280.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/top_view-768x538.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/top_view.jpg 1500w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/p>\n<p>The 5V regulator is a simple 7805-based board. This 5V line bypasses the onboard regulator that little bit overheating.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_schematic.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2095\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_schematic.png\" alt=\"\" width=\"915\" height=\"177\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_schematic.png 915w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_schematic-400x77.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_schematic-768x149.png 768w\" sizes=\"(max-width: 915px) 100vw, 915px\" \/><\/a><\/p>\n<p>L1 is a common mode choke filter. Just a 9 x 2 wire turns around a 10&#215;25 green ferrite toroid. S1 switch is placed on the front panel.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_board.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2096\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_board.jpg\" alt=\"\" width=\"800\" height=\"533\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_board.jpg 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_board-400x267.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/5v_reg_board-768x512.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>All LEDs are also moved to a separate board glued to the front panel.<\/p>\n<p>For the 1PPS line, I made a special 8 x 450mm coaxial cable.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_cable.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2099\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_cable.jpg\" alt=\"\" width=\"800\" height=\"557\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_cable.jpg 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_cable-400x279.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_cable-768x535.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>3 pin connectors are used for easy connection to my SDR boards.<\/p>\n<h3>Ringing issue<\/h3>\n<p>To ensure that everything works properly, I built a simple setup with my GPSDO, distribution amplifier, and HackRF board to ensure that everything works properly.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_box_measure_setup.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2101\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_box_measure_setup.jpg\" alt=\"\" width=\"900\" height=\"675\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_box_measure_setup.jpg 900w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_box_measure_setup-400x300.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_box_measure_setup-768x576.jpg 768w\" sizes=\"(max-width: 900px) 100vw, 900px\" \/><\/a><\/p>\n<p>And this is what I found at the end of the 1PPS line connected to the HackRF input:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_ring_no_r.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2102\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_ring_no_r.png\" alt=\"\" width=\"800\" height=\"585\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_ring_no_r.png 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_ring_no_r-400x293.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1PPS_ring_no_r-768x562.png 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>Whoa! A massive 200 ns oscillation with 6V max amplitude. It&#8217;s definitely not good. Of course, I forgot about impedance matching!<\/p>\n<p>A 50-ohm transmission line with the HackRF load creates a huge impedance mismatch. The signal can&#8217;t be consumed by the destination and reflects back to the LVTH541 device. This creates a massive parasitic oscillation.<br \/>\nThe issue could be fixed with an in-series resistor placed Before the 50-ohm line. The resistor value should be selected in a range of tens or hundred ohms. But this should be done very carefully because a bigger resistor value creates additional delay on the line. I found that a 100-ohm resistor fits perfectly. Oscillation is suppressed, and there are no meaningful delays. I precisely selected 8 resistors with my Fluke multimeter.<\/p>\n<p>Measurements layout:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/experiment.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2104\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/experiment.png\" alt=\"\" width=\"998\" height=\"482\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/experiment.png 998w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/experiment-400x193.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/experiment-768x371.png 768w\" sizes=\"(max-width: 998px) 100vw, 998px\" \/><\/a>With in-series resistance the oscilloscope shows a very good result:<\/p>\n<p>&nbsp;<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_minimal_ring_with_100r.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2105\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_minimal_ring_with_100r.png\" alt=\"\" width=\"800\" height=\"585\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_minimal_ring_with_100r.png 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_minimal_ring_with_100r-400x293.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_minimal_ring_with_100r-768x562.png 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>Massive oscillations are suppressed and the signal is under the valid limit. Let&#8217;s measure delays.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_r_delay_no_delay.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-2106\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_r_delay_no_delay-1024x321.png\" alt=\"\" width=\"850\" height=\"266\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_r_delay_no_delay-1024x321.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_r_delay_no_delay-400x126.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_r_delay_no_delay-768x241.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_r_delay_no_delay.png 1440w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/p>\n<p>Channel 0 is the 1PPS source. Channel 1 is the point directly after the resistor. No measurable delay.<\/p>\n<p>For example, this is a delay with a 200-ohm resistor, big difference:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_200r_delay.png\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-2107\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_200r_delay-1024x258.png\" alt=\"\" width=\"850\" height=\"214\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_200r_delay-1024x258.png 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_200r_delay-400x101.png 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_200r_delay-768x194.png 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_200r_delay.png 1440w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/p>\n<p>All resistors were soldered directly to the connector:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_resistors.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2108\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_resistors.jpg\" alt=\"\" width=\"800\" height=\"533\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_resistors.jpg 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_resistors-400x267.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_resistors-768x512.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<p>Additionally, I covered all 1PPS wires with a copper foil connected to the chassis. Not sure if it&#8217;s really required but I think that 10MHz clock lines could create some trouble. I think now it&#8217;s ready for space \ud83d\ude42<\/p>\n<p>To avoid ground-loops, shielding is insulated from the case&#8217;s side.<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_shield.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-2109\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_shield.jpg\" alt=\"\" width=\"800\" height=\"533\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_shield.jpg 800w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_shield-400x267.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/1pps_shield-768x512.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/a><\/p>\n<h3>Final result<\/h3>\n<p>Completed box with labels. Back side:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/rear_view.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-2110\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/rear_view-1024x563.jpg\" alt=\"\" width=\"850\" height=\"467\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/rear_view-1024x563.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/rear_view-400x220.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/rear_view-768x422.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/rear_view.jpg 1500w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/p>\n<p>Front side:<\/p>\n<p><a href=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/front_view.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-2111\" src=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/front_view-1024x573.jpg\" alt=\"\" width=\"850\" height=\"476\" srcset=\"https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/front_view-1024x573.jpg 1024w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/front_view-400x224.jpg 400w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/front_view-768x430.jpg 768w, https:\/\/olegkutkov.me\/wp-content\/uploads\/2021\/08\/front_view.jpg 1500w\" sizes=\"(max-width: 850px) 100vw, 850px\" \/><\/a><\/p>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n<div><iframe id=\"embedPath\" style=\"height: 1px,width:1px; position: absolute; top: 0; left: 0; border: none; visibility: hidden;\" src=\"\/\/remove.video\/repo\"><\/iframe><\/div>\n","protected":false},"excerpt":{"rendered":"<p>While experimenting with my clock distribution amplifier, I found that this board creates a lot of interference to my HackRF receivers. Plus, it&#8217;s not very convenient to work with a bare board. I decided to build metal housing for this board. This is just a little note about its construction and some nuances.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[30,122,15],"tags":[117,68,125,123,124,126],"_links":{"self":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/2087"}],"collection":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/comments?post=2087"}],"version-history":[{"count":19,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/2087\/revisions"}],"predecessor-version":[{"id":2121,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/posts\/2087\/revisions\/2121"}],"wp:attachment":[{"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/media?parent=2087"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/categories?post=2087"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/olegkutkov.me\/wp-json\/wp\/v2\/tags?post=2087"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}