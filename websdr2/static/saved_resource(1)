function initWidgetActions(){$("#paymentMethods > li > a").click(function(){var a=$(this);var b=a.attr("data-tgltype");if(typeof b===typeof undefined||b===false){setTogglesDefault("");$("#paymentMethods > li.active").removeClass("active");a.parent().addClass("active")}else{setTogglesDefault(b)}});$("#agreement").click(function(){var a=$("#host");var b=$("#projectUid");var c=b.val();window.open("/project/agreement/"+c,"fundingAgreement"+Math.floor(Math.random()*1000),getPopupParams(720,600))});$("#crowd-widget-contract-offer-checkbox").click(function(){var a=$("#crowd-widget-contract-offer-checkbox:checked").length;if(a==0){$("#mainBtn").addClass("disabled")}else{$("#mainBtn").removeClass("disabled")}});$("#amount").numberFormat()}function initWidgetToggles(){var a=$('a[data-tgl="true"]');if(!a.length){return}a.each(function(){var b=$(this);b.click(function(){var c=b.next();c.show();c.clickOut("paymentOption",function(){c.hide();$("html").off(".paymentOption")});c.find("a").each(function(){var d=$(this);d.click(function(){var e=$(this);var f=e.data("type");var g=e.attr("class");c.hide();b.attr("data-type",f);if(g=="crowd-widget-payment-megafon"||g=="crowd-widget-payment-mts"||g=="crowd-widget-payment-beeline"){b.attr("class","crowd-widget-payment-mob selected")}else{b.attr("class",g+" selected")}$("#paymentMethods > li.active").removeClass("active");b.parent().addClass("active");initWidgetToggles()})})})})}$.fn.clickOut=function(a,d){var c=this;if(c&&c.length){var b=function(){c.off("hide");c[0].removeEventListener("DOMNodeRemovedFromDocument",function(){});$("html").off("."+a)};$("html").off("."+a);setTimeout(function(){$("html").on("mousedown."+a,function(e){if(!$(e.target).closest(c).length){d();b()}})});c[0].addEventListener("DOMNodeRemovedFromDocument",function(f){b()});c.on("hide",function(){b()})}return this};function setTogglesDefault(b){var a=$('a[data-tgl="true"]');if(!a.length){return}a.each(function(){var c=$(this);var d=c.data("tgltype");if(b.length==0||d!=b){c.attr("data-type","");switch(d){case"banks":c.attr("class","crowd-widget-payment-banks");break;case"elmoney":c.attr("class","crowd-widget-payment-qiwi-yamoney");break;case"more":c.attr("class","crowd-widget-payment-more");break}}})}function getPopupParams(h,a){var e=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,f=typeof window.screenY!="undefined"?window.screenY:window.screenTop,d=typeof window.outerWidth!="undefined"?window.outerWidth:document.body.clientWidth,c=typeof window.outerHeight!="undefined"?window.outerHeight:(document.body.clientHeight-22),b=parseInt(e+((d-h)/2),10),g=parseInt(f+((c-a)/2.5),10);return"scrollbars=1, resizable=1, menubar=0, left="+b+", top="+g+", width="+h+", height="+a+", toolbar=0, status=0"}function payStart(){var j=$(this);var d=$("#merchant");var b=$("#comment");var k=$("#token");var a=$("#amount");var c=$("#currency");var h=$("#projectUid");var f=$("#UID");var e=$("#host");var i=$('input[name="__RequestVerificationToken"]');var g=$("#paymentType");var l=$("#paymentMethods > li.active > a:first");if(!l.length){l=$("#paymentMethods > li > a:first")}var x=k.val();var y=l.attr("data-type");var m=a.val().replace(",",".");var r=c.val();var q=b.length?b.val():"";var u=h.val();var v=i.val();var s=e.val();var p="https://"+(s=="webmoney.ru"?"funding.webmoney.ru":s);var w=false;f.val("");g.val("");var t=$("#crowd-widget-contract-offer-checkbox:checked").length;if(t==0){return false}a.on("keypress",function(n){setTimeout(function(){a.parent().removeClass("error")},100)});if(m.length==0){a.focus();a.parent().addClass("error");return false}else{a.parent().removeClass("error")}var o=parseFloat(m);if(typeof(o)!=="number"||o<=0){a.focus();a.parent().addClass("error");return false}else{a.parent().removeClass("error")}$("#w-type").val(y);$("#w-comment").val(q);$("#w-amount").val(m);$("#w-currency").val(r);if(y=="mc"){g.val(y);w=true}else{w=true}return w}(function(a){a(function(){initWidgetActions();initWidgetToggles()})})(jQuery);function generateRandomStr(a){var d="";var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var b=0;b<a;b++){d+=c.charAt(Math.floor(Math.random()*c.length))}return d}(function(a,b){a.fn.numberFormat=function(c){var d=a.extend({thSep:" ",decSep:"[,|.]"},c);a(this).not('input[type="number"]').off("keyup.numberFormat").on("keyup.numberFormat",function(){var e=a(this);if(!e.length||e.attr("type")==="hidden"){return}var p=e.val();var j=p.regexIndexOf(new RegExp(d.decSep)),k=p,h="";if(j>=0){k=p.substring(0,j);h=p.substring(j+1)}var l=k.replace(/[^0-9]/g,""),i=h.replace(/[^0-9]/g,"");var f,g=0,m="";for(var n=l.length;n>0;n--){f=l.substr(n-1,1);g++;if(g%3===0&&n!==1){f=d.thSep+f}m=f+m}var o=m+(j>=0?(new RegExp(d.decSep)).exec(p)[0]+i:"");e.val(o)}).trigger("keyup.numberFormat");return this}})(jQuery);String.prototype.regexIndexOf=function(b,c){var a=this.substring(c||0).search(b);return(a>=0)?(a+(c||0)):a};$.extend($.fn,{validate:function(a){if(!this.length){if(a&&a.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var b=$.data(this[0],"validator");if(b){return b}this.attr("novalidate","novalidate");b=new $.validator(a,this[0]);$.data(this[0],"validator",b);$.attr(this[0],"data-validator",true);if(b.settings.onsubmit){this.validateDelegate(":submit","click",function(c){if(b.settings.submitHandler){b.submitButton=c.target}if($(c.target).hasClass("cancel")){b.cancelSubmit=true}if($(c.target).attr("formnovalidate")!==undefined){b.cancelSubmit=true}});this.submit(function(c){if(b.settings.debug){c.preventDefault()}function d(){var e;if(b.settings.submitHandler){if(b.submitButton){e=$("<input type='hidden'/>").attr("name",b.submitButton.name).val($(b.submitButton).val()).appendTo(b.currentForm)}b.settings.submitHandler.call(b,b.currentForm,c);if(b.submitButton){e.remove()}return false}return true}if(b.cancelSubmit){b.cancelSubmit=false;return d()}if(b.form()){if(b.pendingRequest){b.formSubmitted=true;return false}return d()}else{b.focusInvalid();return false}})}return b},valid:function(){var a,b;if($(this[0]).is("form")){a=this.validate().form()}else{a=true;b=this.closest("[data-validator]").validate();this.each(function(){a=b.element(this)&&a})}return a},removeAttrs:function(b){var c={},a=this;$.each(b.split(/\s/),function(d,e){c[e]=a.attr(e);a.removeAttr(e)});return c},rules:function(b,a){var d=this[0],h,i,e,c,g,f;if(b){h=$(d).closest("[data-validator]").data("validator").settings;i=h.rules;e=$.validator.staticRules(d);switch(b){case"add":$.extend(e,$.validator.normalizeRule(a));delete e.messages;i[d.name]=e;if(a.messages){h.messages[d.name]=$.extend(h.messages[d.name],a.messages)}break;case"remove":if(!a){delete i[d.name];return e}f={};$.each(a.split(/\s/),function(j,k){f[k]=e[k];delete e[k];if(k==="required"){$(d).removeAttr("aria-required")}});return f}}c=$.validator.normalizeRules($.extend({},$.validator.classRules(d),$.validator.attributeRules(d),$.validator.dataRules(d),$.validator.staticRules(d)),d);if(c.required){g=c.required;delete c.required;c=$.extend({required:g},c);$(d).attr("aria-required","true")}if(c.remote){g=c.remote;delete c.remote;c=$.extend(c,{remote:g})}return c}});$.extend($.expr[":"],{blank:function(b){return !$.trim(""+$(b).val())},filled:function(b){return !!$.trim(""+$(b).val())},unchecked:function(b){return !$(b).prop("checked")}});$.validator=function(b,a){this.settings=$.extend(true,{},$.validator.defaults,b);this.currentForm=a;this.init()};$.validator.format=function(b,a){if(arguments.length===1){return function(){var c=$.makeArray(arguments);c.unshift(b);return $.validator.format.apply(this,c)}}if(arguments.length>2&&a.constructor!==Array){a=$.makeArray(arguments).slice(1)}if(a.constructor!==Array){a=[a]}$.each(a,function(c,d){b=b.replace(new RegExp("\\{"+c+"\\}","g"),function(){return d})});return b};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a){if(!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))){this.element(a)}},onkeyup:function(a,b){if(b.which===9&&this.elementValue(a)===""){return}else{if(a.name in this.submitted||a===this.lastElement){this.element(a)}}},onclick:function(a){if(a.name in this.submitted){this.element(a)}else{if(a.parentNode.name in this.submitted){this.element(a.parentNode)}}},highlight:function(a,b,c){if(a.type==="radio"){this.findByName(a.name).addClass(b).removeClass(c)}else{$(a).addClass(b).removeClass(c)}},unhighlight:function(a,b,c){if(a.type==="radio"){this.findByName(a.name).removeClass(b).addClass(c)}else{$(a).removeClass(b).addClass(c)}}},setDefaults:function(a){$.extend($.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={}),c;$.each(this.settings.groups,function(d,e){if(typeof e==="string"){e=e.split(/\s/)}$.each(e,function(f,g){b[g]=d})});c=this.settings.rules;$.each(c,function(d,e){c[d]=$.validator.normalizeRule(e)});function a(d){var g=this.closest("[data-validator]").data("validator"),e="on"+d.type.replace(/^validate/,""),f=g.settings;if(f[e]&&!this.is(f.ignore)){f[e].call(g,this[0],d)}}$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",a).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",a);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,a=(this.currentElements=this.elements());a[b];b++){this.check(a[b])}return this.valid()},element:function(c){var b=this.clean(c),a=this.validationTargetFor(b),d=true;this.lastElement=a;if(a===undefined){delete this.invalid[b.name]}else{this.prepareElement(a);this.currentElements=$(a);d=this.check(a)!==false;if(d){delete this.invalid[a.name]}else{this.invalid[a.name]=true}}$(c).attr("aria-invalid",!d);if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return d},showErrors:function(a){if(a){$.extend(this.errorMap,a);this.errorList=[];for(var b in a){this.errorList.push({message:a[b],element:this.findByName(b)[0]})}this.successList=$.grep(this.successList,function(c){return !(c.name in a)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(c){var a=0,b;for(b in c){a++}return a},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}}},findLastActive:function(){var a=this.lastActive;return a&&$.grep(this.errorList,function(b){return b.element.name===a.name}).length===1&&a},elements:function(){var b=this,a={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&b.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in a||!b.objectLength($(this).rules())){return false}a[this.name]=true;return true})},clean:function(a){return $(a)[0]},errors:function(){var a=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+a,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(b){var d,a=$(b),c=b.type;if(c==="radio"||c==="checkbox"){return $("input[name='"+b.name+"']:checked").val()}else{if(c==="number"&&typeof b.validity!=="undefined"){return b.validity.badInput?false:a.val()}}d=a.val();if(typeof d==="string"){return d.replace(/\r/g,"")}return d},check:function(c){c=this.validationTargetFor(this.clean(c));var h=$(c).rules(),i=$.map(h,function(k,e){return e}).length,a=false,j=this.elementValue(c),f,d,g;for(d in h){g={method:d,parameters:h[d]};try{f=$.validator.methods[d].call(this,j,c,g.parameters);if(f==="dependency-mismatch"&&i===1){a=true;continue}a=false;if(f==="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!f){this.formatAndAdd(c,g);return false}}catch(b){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+c.id+", check the '"+g.method+"' method.",b)}throw b}}if(a){return}if(this.objectLength(h)){this.successList.push(c)}return true},customDataMessage:function(a,b){return $(a).data("msg"+b.charAt(0).toUpperCase()+b.substring(1).toLowerCase())||$(a).data("msg")},customMessage:function(c,b){var a=this.settings.messages[c];return a&&(a.constructor===String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++){if(arguments[a]!==undefined){return arguments[a]}}return undefined},defaultMessage:function(a,b){return this.findDefined(this.customMessage(a.name,b),this.customDataMessage(a,b),!this.settings.ignoreTitle&&a.title||undefined,$.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,c){var b=this.defaultMessage(a,c.method),d=/\$?\{(\d+)\}/g;if(typeof b==="function"){b=b.call(this,c.parameters,a)}else{if(d.test(b)){b=$.validator.format(b.replace(d,"{$1}"),c.parameters)}}this.errorList.push({message:b,element:a,method:c.method});this.errorMap[a.name]=b;this.submitted[a.name]=b},addWrapper:function(a){if(this.settings.wrapper){a=a.add(a.parent(this.settings.wrapper))}return a},defaultShowErrors:function(){var c,a,b;for(c=0;this.errorList[c];c++){b=this.errorList[c];if(this.settings.highlight){this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(c=0,a=this.validElements();a[c];c++){this.settings.unhighlight.call(this,a[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(a,e){var f,d,c=this.errorsFor(a),b=this.idOrName(a);if(c.length){c.removeClass(this.settings.validClass).addClass(this.settings.errorClass);c.html(e)}else{c=$("<"+this.settings.errorElement+">").attr("id",b+"-error").addClass(this.settings.errorClass).html(e||"");f=c;if(this.settings.wrapper){f=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(this.labelContainer.length){this.labelContainer.append(f)}else{if(this.settings.errorPlacement){this.settings.errorPlacement(f,$(a))}else{f.insertAfter(a)}}if(c.is("label")){c.attr("for",b)}else{if(c.parents("label[for='"+b+"']").length===0){$(a).attr("aria-describedby",c.attr("id"));d=this.groups[a.name];if(d){$.each(this.groups,function(g,h){if(h===d){$("[name='"+g+"']",this.currentForm).attr("aria-describedby",c.attr("id"))}})}}}}if(!e&&this.settings.success){c.text("");if(typeof this.settings.success==="string"){c.addClass(this.settings.success)}else{this.settings.success(c,a)}}this.toShow=this.toShow.add(c)},errorsFor:function(b){var c=this.idOrName(b),a=$(b).attr("aria-describedby");if(a){return $("#"+a,this.errorContext)}else{return this.errors().filter("label[for='"+c+"'], label[for='"+c+"'] *")}},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a)){a=this.findByName(a.name).not(this.settings.ignore)[0]}return a},checkable:function(a){return(/radio|checkbox/i).test(a.type)},findByName:function(a){return $(this.currentForm).find("[name='"+a+"']")},getLength:function(b,a){switch(a.nodeName.toLowerCase()){case"select":return $("option:selected",a).length;case"input":if(this.checkable(a)){return this.findByName(a.name).filter(":checked").length}}return b.length},depend:function(b,a){return this.dependTypes[typeof b]?this.dependTypes[typeof b](b,a):true},dependTypes:{"boolean":function(a){return a},string:function(b,a){return !!$(b,$(a).closest("[data-validator]")).length},"function":function(b,a){return b(a)}},optional:function(a){var b=this.elementValue(a);return !$.validator.methods.required.call(this,b,a)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(a,b){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[a.name];if(b&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false}else{if(!b&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(a){return $.data(a,"previousValue")||$.data(a,"previousValue",{old:null,valid:true,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(a,b){if(a.constructor===String){this.classRuleSettings[a]=b}else{$.extend(this.classRuleSettings,a)}},classRules:function(b){var c={},a=$(b).attr("class");if(a){$.each(a.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(c,$.validator.classRuleSettings[this])}})}return c},attributeRules:function(b){var d={},a=$(b),e=b.getAttribute("type"),c,f;for(c in $.validator.methods){if(c==="required"){f=b.getAttribute(c);if(f===""){f=true}f=!!f}else{f=a.attr(c)}if(/min|max/.test(c)&&(e===null||/number|range|text/.test(e))){f=Number(f)}if(f||f===0){d[c]=f}else{if(e===c&&e!=="range"){d[c]=true}}}if(d.maxlength&&/-1|2147483647|524288/.test(d.maxlength)){delete d.maxlength}return d},dataRules:function(b){var c,e,d={},a=$(b);for(c in $.validator.methods){e=a.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase());if(e!==undefined){d[c]=e}}return d},staticRules:function(a){var b={},c=$(a).closest("[data-validator]").data("validator");if(c.settings.rules){b=$.validator.normalizeRule(c.settings.rules[a.name])||{}}return b},normalizeRules:function(b,a){$.each(b,function(d,e){if(e===false){delete b[d];return}if(e.param||e.depends){var c=true;switch(typeof e.depends){case"string":c=!!$(e.depends,$(a).closest("[data-validator]")).length;break;case"function":c=e.depends.call(a,a);break}if(c){b[d]=e.param!==undefined?e.param:true}else{delete b[d]}}});$.each(b,function(d,c){b[d]=$.isFunction(c)?c(a):c});$.each(["minlength","maxlength"],function(){if(b[this]){b[this]=Number(b[this])}});$.each(["rangelength","range"],function(){var c;if(b[this]){if($.isArray(b[this])){b[this]=[Number(b[this][0]),Number(b[this][1])]}else{if(typeof b[this]==="string"){c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/);b[this]=[Number(c[0]),Number(c[1])]}}}});if($.validator.autoCreateRanges){if(b.min&&b.max){b.range=[b.min,b.max];delete b.min;delete b.max}if(b.minlength&&b.maxlength){b.rangelength=[b.minlength,b.maxlength];delete b.minlength;delete b.maxlength}}return b},normalizeRule:function(a){if(typeof a==="string"){var b={};$.each(a.split(/\s/),function(){b[this]=true});a=b}return a},addMethod:function(c,b,a){$.validator.methods[c]=b;$.validator.messages[c]=a!==undefined?a:$.validator.messages[c];if(b.length<3){$.validator.addClassRules(c,$.validator.normalizeRule(c))}},methods:{required:function(d,a,b){if(!this.depend(b,a)){return"dependency-mismatch"}if(a.nodeName.toLowerCase()==="select"){var c=$(a).val();return c&&c.length>0}if(this.checkable(a)){return this.getLength(d,a)>0}return $.trim(d).length>0},email:function(b,a){return this.optional(a)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(b)},url:function(b,a){return this.optional(a)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},date:function(b,a){return this.optional(a)||!/Invalid|NaN/.test(new Date(b).toString())},dateISO:function(b,a){return this.optional(a)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(b)},number:function(b,a){return this.optional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(b)},digits:function(b,a){return this.optional(a)||/^\d+$/.test(b)},creditcard:function(g,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(g)){return false}var e=0,f=0,a=false,d,b;g=g.replace(/\D/g,"");if(g.length<13||g.length>19){return false}for(d=g.length-1;d>=0;d--){b=g.charAt(d);f=parseInt(b,10);if(a){if((f*=2)>9){f-=9}}e+=f;a=!a}return(e%10)===0},minlength:function(d,a,c){var b;if($(a).attr("ishtml")=="1"){b=$("#"+$(a).attr("clearId")).val().length}else{b=$.isArray(d)?d.length:this.getLength($.trim(d),a)}return this.optional(a)||b>=c},maxlength:function(d,a,c){var b;if($(a).attr("ishtml")=="1"){b=$("#"+$(a).attr("clearId")).val().length}else{b=$.isArray(d)?d.length:this.getLength($.trim(d),a)}return this.optional(a)||b<=c},rangelength:function(d,a,c){var b=$.isArray(d)?d.length:this.getLength($.trim(d),a);return this.optional(a)||(b>=c[0]&&b<=c[1])},min:function(c,a,b){return this.optional(a)||c>=b},max:function(c,a,b){return this.optional(a)||c<=b},range:function(c,a,b){return this.optional(a)||(c>=b[0]&&c<=b[1])},equalTo:function(d,a,b){var c=$(b);if(this.settings.onfocusout){c.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(a).valid()})}return d===c.val()},remote:function(f,b,c){if(this.optional(b)){return"dependency-mismatch"}var d=this.previousValue(b),e,a;if(!this.settings.messages[b.name]){this.settings.messages[b.name]={}}d.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=d.message;c=typeof c==="string"&&{url:c}||c;if(d.old===f){return d.valid}d.old=f;e=this;this.startRequest(b);a={};a[b.name]=f;$.ajax($.extend(true,{url:c,mode:"abort",port:"validate"+b.name,dataType:"json",data:a,context:e.currentForm,success:function(i){var k=i===true||i==="true",g,h,j;e.settings.messages[b.name].remote=d.originalMessage;if(k){j=e.formSubmitted;e.prepareElement(b);e.formSubmitted=j;e.successList.push(b);delete e.invalid[b.name];e.showErrors()}else{g={};h=i||e.defaultMessage(b,"remote");g[b.name]=d.message=$.isFunction(h)?h(f):h;e.invalid[b.name]=true;e.showErrors(g)}d.valid=k;e.stopRequest(b,k)}},c));return"pending"}}});$.format=function deprecated(){throw"$.format has been deprecated. Please use $.validator.format instead."};$.extend($.fn,{validateDelegate:function(a,c,b){return this.bind(c,function(d){var e=$(d.target);if(e.is(a)){return b.apply(e,arguments)}})}});var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(c,a,d){var b=c.port;if(c.mode==="abort"){if(pendingRequests[b]){pendingRequests[b].abort()}pendingRequests[b]=d}})}else{ajax=$.ajax;$.ajax=function(c){var a=("mode" in c?c:$.ajaxSettings).mode,b=("port" in c?c:$.ajaxSettings).port;if(a==="abort"){if(pendingRequests[b]){pendingRequests[b].abort()}pendingRequests[b]=ajax.apply(this,arguments);return pendingRequests[b]}return ajax.apply(this,arguments)}};